@startuml login

title Login Flow

actor "User" as user
participant "User Service" as user_service
participant "Database" as database

note over user
In this example, the user could be
a **doctor** or a **patient**.
end note

user -> user_service: POST /users/login\n(username, password)

note over user_service
The user service will validate the
credentials accordingly to the login
method chosen by the user.

If the user is a **doctor**, the
service will validate the
**medical id** and **password**.

If the user is a **patient**, the
service will validate the
**email** or **document id (cpf)**
and **password**.
end note

activate user_service
user_service -> user_service: Validate user
user_service -> database: Create user
database --> user_service: Created
user_service --> user: 201 Created
deactivate user_service

@enduml